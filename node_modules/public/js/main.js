// what is up with this caching
let jobPos = document.getElementById("job-pos");
let CollageImg = document.getElementById("CollageImg");
let preloader = document.getElementById("pulsing-intro");
let currentIndex = 0;
let currentIndexjp = 0;
let currentIndexCollage = 0;
let posList = [
  "Web Developer",
  "Mobile Developer",
  "UI/UX Designer",
  "Designer By Heart",
];
let CollageList = ["collage2", "collage3", "collage1"];

window.onload = () => {
  // Start fading the preloader once the page is loaded
  fadePreloader();

  // Start other intervals after the page is fully loaded
  setInterval(updateJobPos, 4000);
  setInterval(updateCollage, 4000);
};

function updateCollage() {
  CollageImg.src = `/images/${CollageList[currentIndexCollage]}.png`;
  currentIndexCollage = (currentIndexCollage + 1) % CollageList.length;
}

function updateJobPos() {
  // Remove the animation class to reset the animation
  jobPos.parentNode.classList.remove("typewriter");
  // Change the text content
  jobPos.innerText = `${posList[currentIndexjp]}`;

  // Trigger a reflow to restart the animation
  void jobPos.parentNode.offsetWidth; // This forces a reflow

  // Reapply the animation class
  jobPos.parentNode.classList.add("typewriter");

  // Move to the next position in the list
  currentIndexjp = (currentIndexjp + 1) % posList.length;
}

function fadePreloader() {
  preloader.style.transition = "opacity 1s ease"; // 1-second fade-out effect
  preloader.style.opacity = 0; // Set opacity to 0 to fade out

  // Wait for the fade-out to complete, then hide the element
  setTimeout(() => {
    preloader.style.display = "none"; // Hide the preloader completely
  }, 1000); // Match the transition duration
}
